<pre><font color="#26A269"><b>shilei@shilei-ubuntu</b></font>:<font color="#12488B"><b>~/Documents/clion-2022.1.1/bin</b></font>$ history
    1  sudo mkdir /usr/local/MATLAB/R2022a
    2  sudo mkdir /usr/local/MATLAB
    3  sudo mkdir /usr/local/MATLAB/R2022a
    4  chmod 777 /usr/local/MATLAB/R2022a
    5  chmod 666 /usr/local/MATLAB/R2022a
    6  sudo chmod 777  /usr/local/MATLAB/R2022a
    7  ls -l /usr/local/MATLAB/
    8  sudo chown shilei /usr/local/MATLAB/R2022a
    9  ls -l /usr/local/MATLAB/
   10  sudo ./install
   11  python --version
   12  sudo apt install software-properties-common
   13  sudo add-apt-repository ppa:deadsnakes/ppa
   14  sudo apt update
   15  sudo apt install python3.8
   16  sudo apt-get install python3-pip
   17  pip install matplotlib
   18  matlab
   19  $MATLABROOT/bin
   20  cd $MATLABROOT/bin
   21  ./matlab
   22  ls -l
   23  cd ..
   24  cd ~
   25  export PATH=/usr/local/MATLAB/R2022a/bin/:$PATH
   26  matlab
   27  ./install
   28  sudo ./install
   29  su -r
   30  su
   31  ./install
   32  sudo apt-get install git
   33  sudo apt install build-essential
   34  sudo apt-get install manpages-dev
   35  gcc --version
   36  sudo apt-get install libomp-dev
   37  ./bin/clion.sh
   38  nohup % ./bin/clion.sh
   39  nohup &amp; ./bin/clion.sh
   40  ./bin/clion.sh
   41  sudo apt-get update
   42  sudo apt-get upgrade
   43  sudo apt install -u curl Coty
   44  sudo apt install -u curl Copy
   45  sudo apt install -y cur;
   46  sudo apt install -y curl
   47  curl -fsSL https://dl.google.com/linux/linux_signing_key.pub | sudo gpg --dearmor -o /usr/share/keyrings/googlechrom-keyring.gpg
   48  echo &quot;deb [arch=amd64 signed-by=/usr/share/keyrings/googlechrom-keyring.gpg] http://dl.google.com/linux/chrome/deb/ stable main&quot; | sudo tee /etc/apt/sources.list.d/google-chrome.list
   49  sudo apt update
   50  sudo apt install -y google-chrome-stable
   51  historyu
   52  history
   53  cd ~/Documents/
   54  ls -l
   55  cd clion-2022.1.1/
   56  cd bin/
   57  ./clion.sh
   58  matlab
   59  sudo export PATH=/usr/local/MATLAB/R2022a/bin/:$PATH
   60  export PATH=/usr/local/MATLAB/R2022a/bin/:$PATH
   61  matlan
   62  matlab
   63  cd clion-2022.1.1/
   64  cd /home/shilei/Documents/clion-2022.1.1/bin/ &amp;&amp;./clion.sh
   65  export PATH=/usr/local/MATLAB/R2022a/bin/:$PATH
   66  matlab
   67  pip3 install numpy
   68  which python3.10
   69  sudo update-alternatives  --set python3 /usr/bin/python3.8
   70  sudo apt install ppa-purge
   71  sudo ppa-purge ppa:deadsnakes/ppa
   72  python
   73  python3
   74  pip install numpy
   75  pip uninstall numpy
   76  pip3 install numpy
   77  sudo pip3 install numpy
   78  sudo apt install python3-numpy
   79  pip install distutils
   80  sudo pip install distutils
   81  ./cils 32
   82  python3
   83  ./cils 32
   84  ./cils 44
   85  cd /CLionProjects/babai_asyn/babai_asyn_c++/cmake-build-release
   86  cd ~/CLionProjects/babai_asyn/babai_asyn_c++/cmake-build-release
   87  ./cils 56
   88  cd /home/shilei/CLionProjects/babai_asyn/babai_asyn_c++/cmake-build-release/
   89  ./cils 32
   90  ./cils 44
   91  export PATH=/usr/local/MATLAB/R2022a/bin/:$PATH
   92  matlab
   93  cd /home/shilei/Documents/clion-2022.1.1/bin/ &amp;&amp;./clion.sh
   94  sudo apt install texlive-latex-extra
   95  apt install cm-super
   96  sudo apt install cm-super
   97  sudo apt install texlive texlive-latex-extra texlive-fonts-recommended dvipng
   98  sudo apt install gnome-shell-extensions
   99  sudo apt-get update
  100  sudo apt-get upgrade
  101  history
<font color="#26A269"><b>shilei@shilei-ubuntu</b></font>:<font color="#12488B"><b>~/Documents/clion-2022.1.1/bin</b></font>$ cd ~
<font color="#26A269"><b>shilei@shilei-ubuntu</b></font>:<font color="#12488B"><b>~</b></font>$ history
    1  sudo mkdir /usr/local/MATLAB/R2022a
    2  sudo mkdir /usr/local/MATLAB
    3  sudo mkdir /usr/local/MATLAB/R2022a
    4  chmod 777 /usr/local/MATLAB/R2022a
    5  chmod 666 /usr/local/MATLAB/R2022a
    6  sudo chmod 777  /usr/local/MATLAB/R2022a
    7  ls -l /usr/local/MATLAB/
    8  sudo chown shilei /usr/local/MATLAB/R2022a
    9  ls -l /usr/local/MATLAB/
   10  sudo ./install
   11  python --version
   12  sudo apt install software-properties-common
   13  sudo add-apt-repository ppa:deadsnakes/ppa
   14  sudo apt update
   15  sudo apt install python3.8
   16  sudo apt-get install python3-pip
   17  pip install matplotlib
   18  matlab
   19  $MATLABROOT/bin
   20  cd $MATLABROOT/bin
   21  ./matlab
   22  ls -l
   23  cd ..
   24  cd ~
   25  export PATH=/usr/local/MATLAB/R2022a/bin/:$PATH
   26  matlab
   27  ./install
   28  sudo ./install
   29  su -r
   30  su
   31  ./install
   32  sudo apt-get install git
   33  sudo apt install build-essential
   34  sudo apt-get install manpages-dev
   35  gcc --version
   36  sudo apt-get install libomp-dev
   37  ./bin/clion.sh
   38  nohup % ./bin/clion.sh
   39  nohup &amp; ./bin/clion.sh
   40  ./bin/clion.sh
   41  sudo apt-get update
   42  sudo apt-get upgrade
   43  sudo apt install -u curl Coty
   44  sudo apt install -u curl Copy
   45  sudo apt install -y cur;
   46  sudo apt install -y curl
   47  curl -fsSL https://dl.google.com/linux/linux_signing_key.pub | sudo gpg --dearmor -o /usr/share/keyrings/googlechrom-keyring.gpg
   48  echo &quot;deb [arch=amd64 signed-by=/usr/share/keyrings/googlechrom-keyring.gpg] http://dl.google.com/linux/chrome/deb/ stable main&quot; | sudo tee /etc/apt/sources.list.d/google-chrome.list
   49  sudo apt update
   50  sudo apt install -y google-chrome-stable
   51  historyu
   52  history
   53  cd ~/Documents/
   54  ls -l
   55  cd clion-2022.1.1/
   56  cd bin/
   57  ./clion.sh
   58  matlab
   59  sudo export PATH=/usr/local/MATLAB/R2022a/bin/:$PATH
   60  export PATH=/usr/local/MATLAB/R2022a/bin/:$PATH
   61  matlan
   62  matlab
   63  cd clion-2022.1.1/
   64  cd /home/shilei/Documents/clion-2022.1.1/bin/ &amp;&amp;./clion.sh
   65  export PATH=/usr/local/MATLAB/R2022a/bin/:$PATH
   66  matlab
   67  pip3 install numpy
   68  which python3.10
   69  sudo update-alternatives  --set python3 /usr/bin/python3.8
   70  sudo apt install ppa-purge
   71  sudo ppa-purge ppa:deadsnakes/ppa
   72  python
   73  python3
   74  pip install numpy
   75  pip uninstall numpy
   76  pip3 install numpy
   77  sudo pip3 install numpy
   78  sudo apt install python3-numpy
   79  pip install distutils
   80  sudo pip install distutils
   81  ./cils 32
   82  python3
   83  ./cils 32
   84  ./cils 44
   85  cd /CLionProjects/babai_asyn/babai_asyn_c++/cmake-build-release
   86  cd ~/CLionProjects/babai_asyn/babai_asyn_c++/cmake-build-release
   87  ./cils 56
   88  cd /home/shilei/CLionProjects/babai_asyn/babai_asyn_c++/cmake-build-release/
   89  ./cils 32
   90  ./cils 44
   91  export PATH=/usr/local/MATLAB/R2022a/bin/:$PATH
   92  matlab
   93  cd /home/shilei/Documents/clion-2022.1.1/bin/ &amp;&amp;./clion.sh
   94  sudo apt install texlive-latex-extra
   95  apt install cm-super
   96  sudo apt install cm-super
   97  sudo apt install texlive texlive-latex-extra texlive-fonts-recommended dvipng
   98  sudo apt install gnome-shell-extensions
   99  sudo apt-get update
  100  sudo apt-get upgrade
  101  history
  102  cd ~
  103  history
<font color="#26A269"><b>shilei@shilei-ubuntu</b></font>:<font color="#12488B"><b>~</b></font>$

</pre>


cmake_minimum_required(VERSION 3.8)
project(cils_solver)

# detect C++ compiler - the C compiler must be the same type too
if ("${CMAKE_CXX_COMPILER_ID}" MATCHES "GNU" OR "${CMAKE_CXX_COMPILER_ID}" MATCHES "Clang")
set(CXX_COMPILER_GNUCLANG TRUE)
if ("${CMAKE_CXX_COMPILER_ID}" MATCHES "GNU")
set(CXX_COMPILER_GNU TRUE)
message(STATUS "GNU C++ compiler detected")
if (NOT ("${CMAKE_C_COMPILER_ID}" MATCHES "GNU"))
message(SEND_ERROR "C and C++ compilers should match!")
endif ()
else ()
set(CXX_COMPILER_CLANG TRUE)
message(STATUS "Clang C++ compiler detected")
if (NOT ("${CMAKE_C_COMPILER_ID}" MATCHES "Clang"))
message(SEND_ERROR "C and C++ compilers should match!")
endif ()
endif ()
else ()
message(SEND_ERROR "Could not identify compiler!")
endif ()

# Basic options
if (CXX_COMPILER_GNUCLANG OR CXX_COMPILER_INTEL)
set(CMAKE_CXX_FLAGS "-std=c++17")
set(CMAKE_C_FLAGS "-std=c17")
set(CMAKE_CXX_FLAGS_DEBUG "-g")
set (CMAKE_CXX_FLAGS_RELEASE "-O3")
endif ()

# to compile with OpenMP
if (CXX_COMPILER_GNUCLANG)
set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -fopenmp")
set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -fopenmp")
message(STATUS "Compiling with OpenMP for GNU")
elseif (CXX_COMPILER_INTEL)
set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -qopenmp")
set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -qopenmp")
message(STATUS "Compiling with OpenMP for Intel")
elseif (CXX_COMPILER_CRAY)
message(STATUS "Compiling with OpenMP for Cray")
elseif (CXX_COMPILER_PGI)
message(STATUS "Compiling with OpenMP for PGI")
else ()
message(SEND_ERROR "Don't know OpenMP flag for this compiler!")
endif ()
set(Matlab_ROOT_DIR "/usr/local/MATLAB/R2022a/")
#set(Python3_NumPy_INCLUDE_DIR "/usr/local/lib/python3.10/dist-packages/numpy/core/include")
#message(${Matlab_ROOT_DIR})

find_package(Python3 COMPONENTS Interpreter Development NumPy)
#find_package(Python3 COMPONENTS Interpreter NumPy)
find_package(OpenMP REQUIRED)
find_package(Matlab REQUIRED)
find_package(Boost REQUIRED)
#find_package(MPI)
set(CMAKE_CXX_STANDARD 17)

include_directories(${Python3_INCLUDE_DIRS})
include_directories(${Python3_NumPy_INCLUDE_DIR})
include_directories(${Matlab_INCLUDE_DIRS})
add_executable(cils main.cpp)


if (Python3_NumPy_FOUND)
message("-- Python3_NumPy_FOUND ${Python3_NumPy_INCLUDE_DIR}")
endif ()

if (Python3_FOUND)
message("-- Python3_FOUND ${Python3_LIBRARIES}")
message("-- Python3_Interpreter_FOUND ${Python3_Interpreter_FOUND}")
message("-- Python3_EXECUTABLE ${Python3_EXECUTABLE}")
message("-- Python3_SITELIB ${Python3_SITELIB}")
message("-- Python3_INCLUDE_DIRS ${Python3_INCLUDE_DIRS}")
target_link_libraries(cils ${Python3_LIBRARIES})

endif ()

if (Matlab_FOUND)
message(STATUS "Linking Matlab")
target_link_libraries(cils ${Matlab_ROOT_DIR}/extern/bin/glnxa64/libMatlabEngine.so)
target_link_libraries(cils ${Matlab_ROOT_DIR}/extern/bin/glnxa64/libMatlabDataArray.so)
message("-- Matlab_FOUND ${PROJECT_NAME} ${Matlab_LIBRARIES}")
endif ()

if (Boost_FOUND)
message(STATUS "Linking Boost")
target_link_libraries(cils ${Boost_LIBRARY_DIRS})
message("-- Boost_FOUND ${Boost_LIBRARY_DIRS}")
endif ()


#message("-- reduction PRIVATE ${reduction_lib}")
#cd ~/babai_asyn/babai_asyn_c++/ && cd build  && git pull && cmake .. -D Python3_NumPy_INCLUDE_DIR=/cvmfs/soft.computecanada.ca/easybuild/software/2020/avx2/Core/scipy-stack/2020b/lib/python3.8/site-packages/numpy/core/include/ && make -j 4 && cp cils ~/scratch/cils && cd ~/scratch/ && sbatch job_script_LLL.sh
# -D Python3_NumPy_INCLUDE_DIR=/home/shilei/.local/lib/python3.10/site-packages/numpy/core/include/